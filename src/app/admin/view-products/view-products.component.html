<div class="view-products">
    <div class="feed item-list">
        @for (product of products; track $index) {
            @if(product.deletedAt == null) {
                <div class="product item">
                    <div class="product-header item-header">
                        <span class="name"><h1>{{product.name}}</h1></span>
                        <span class="category">{{product.category}}</span>
                        <span class="price"><h4>{{product.currency}} {{product.price}}</h4></span>
                        @if(editEnabled && editEnabled?.id == product.id) {
                            <button class="cancel-button" (click)="handleEditProduct(product)">Cancel</button>
                        } @else {
                            <button class="edit-button" (click)="handleEditProduct(product)">Edit</button>
                        }
                        <button class="delete-item-btn" (click)="handleDelete(product.id, $index)">Delete</button>
                    </div>
                    <div class="product-info item-info">
                        @if(product.shortDescription) {
                            <div class="short-description" [ngClass]="{'no-long-desc': !product.longDescription}"><p>{{product.shortDescription}}</p></div>
                        }
                        @if(product.longDescription) {
                            <div class="long-description"><p>{{product.longDescription}}</p></div>
                        }
                        @if(!product.shortDescription
                            && !product.longDescription) {
                            <p>No information available about this product</p>
                        }
                    </div>
                </div>
            }
        }
    </div>
    <div class="product-side-bar">
        <div class="meta-data">
            <p>Catalog id: {{catalogId}}</p>
            @if (editCatalogEnabled) {
                <app-edit-catalog [catalogId]="editCatalogEnabled" [catalogName]="catalogName" (goBack)="handleEditCatalog()"></app-edit-catalog>
            } @else {
                <button class="edit-catalog-btn" (click)="handleEditCatalog()">Edit Catalog</button>
            }
            <button class="go-back" routerLink="/dashboard">Go to Dashboard</button>
        </div>
        @if (editEnabled) {
            <app-edit-product [product]="editEnabled" (cancel)="handleEditProduct($event)"></app-edit-product>
        }
    </div>
</div>
